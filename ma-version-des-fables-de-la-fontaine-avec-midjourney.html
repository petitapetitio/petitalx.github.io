<!DOCTYPE html>
<html lang="fr">
  <head>
        <title>Alexandre Petit - Ma version des Fables de La Fontaine avec Midjourney</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" type="text/css" href="https://petitalx.github.io/theme/css/style.css" />
      <link rel="stylesheet" type="text/css" href="https://petitalx.github.io/theme/css/code.css" />
      <script>
      function copyToClipboard(button) {
          const codeElement = button.nextElementSibling.querySelector('code');
          const codeText = codeElement.innerText || codeElement.textContent;

          navigator.clipboard.writeText(codeText).then(() => {
              // Provide feedback to the user
              button.textContent = 'Copied!';
              setTimeout(() => {
                  button.textContent = 'Copy code';
              }, 2000);
          }).catch(err => {
              console.error('Could not copy text: ', err);
          });
      }
      </script>

      <script defer id="fairlytics-id-ajcu6jd9k7ysd6" data-fairlyticskey="a8dadb702211d3b56df412e4fbde8518" src="https://app.fairlytics.tech/tag/tag.js"></script>

        <link href="https://petitalx.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Alexandre Petit Full Atom Feed" />
        <link href="https://petitalx.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Alexandre Petit Full RSS Feed" />




  </head>

  <body>
    <header>
      <hgroup><h1><a href="https://petitalx.github.io/">Alexandre Petit</a></h1></hgroup>
    </header>
    <main>
  <article>
    <header>
      <h2>Ma version des Fables de La Fontaine avec Midjourney</h2>
    </header>
    <div>
      <i>Temps de lecture : 21 min.</i>
    </div>
    <p>Hello ! </p>
<p>Bienvenue dans <em>100 produits</em>.</p>
<p>Ma dÃ©marche est donner vie Ã  des projets en quelques journÃ©es et de documenter leur rÃ©alisation. PlutÃ´t que de travailler sur LE projet parfait, je vais multiplier les expÃ©rimentations, explorer les faÃ§ons de trouver des solutions, mettre les mains dans le cambouis, trouver des hacks, aller droit au but, copier des idÃ©es de business dÃ©jÃ  existantes, lancer rapidement, itÃ©rer, amÃ©liorer, et rÃ©pÃ©ter lâ€™expÃ©rience jusqu'Ã  ce qu'elle soit couronnÃ©e de succÃ¨s.</p>
<p>Cette newsletter sera comme un journal de bord et je publierai une rÃ©trospective par projet. <br/><br/>Câ€™est parti pour la premiÃ¨re !</p>
<h2>Une version illustrÃ©e des fables de La Fontaine</h2>
<p>Jâ€™ai redÃ©couvert les Fables de La Fontaine il y a deux ans, dans <a href="https://podcast.ausha.co/artisan-developpeur/le-loup-et-le-chien">un Ã©pisode du podcast Artisan DÃ©veloppeur </a>de Benoit Gantaume. Depuis, jâ€™ai souhaitÃ© les relire. Jâ€™ai achetÃ© deux Ã©ditions, mais aucune ne mâ€™a vraiment plus : </p>
<ul><li><p>La premiÃ¨re est une version de poche. La mise en page est agrÃ©able, mais il nâ€™y a pas dâ€™images et je trouve que cela manque Ã  lâ€™expÃ©rience de lecture.</p></li><li><p>La deuxiÃ¨me est une intÃ©grale illustrÃ©e, en quatre tomes : les images sont belles, mais la mise en page nâ€™est pas agrÃ©able. Aussi, toutes les fables ne se valent pas. Parmi les 243, certaines sont plus universelles que dâ€™autres. Or, je ne recherche pas une encyclopÃ©die sur La Fontaine. Juste des histoires avec des leÃ§ons de vie que je peux mÃ©diter dans mon quotidien. Le 20% qui apportent 80% de la valeur.</p></li></ul>
<p>Avec la sortie de ChatGPT et la version 4 de Midjourney fin 2022, on a vu de nombreuses personnes crÃ©er des livres en combinant ces deux technologies et les mettre en vente sur Amazon, â€œjuste en cliquant sur un boutonâ€  ! Cela mâ€™a donnÃ© envie dâ€™expÃ©rimenter.<br/><br/>Enfin, je cherchais un prÃ©texte pour me documenter davantage sur ChatGPT et Midjourney. Les capacitÃ©s esthÃ©tiques de Midjourney sont bluffantes. Et, quelque part, jâ€™ai pensÃ© que peut-Ãªtre une Ã©dition actualisÃ©e des Fables, avec des images Ã©poustouflantes, donnerait peut-Ãªtre envie Ã  un public de 20-30 ans de redÃ©couvrir ces textes.<br/></p>
<p>Je me suis alors lancÃ© dans ce projet avec en tÃªte :</p>
<ul><li><p>dâ€™automatiser un maximum le processus </p></li><li><p>dâ€™aller au bout quoi quâ€™il arrive</p></li><li><p>de chercher en premier lieu un produit fini plutÃ´t quâ€™un produit parfait</p></li><li><p>dâ€™y consacrer 5 jours maximum<br/></p></li></ul>
<p>Ã‰videmment, tout ne sâ€™est pas passÃ© comme prÃ©vu.</p>
<p></p>
<blockquote><p>Le PDF du rÃ©sultat final est visible <a href="https://www.dropbox.com/scl/fi/i9rb8ggmcalt74805dqw5/Les-Fables-de-La-Fontaine-illustr-es-avec-Midjourney-Alexandre-Petit.pdf?rlkey=6dnidl571o887rv8inexo2yub&amp;dl=0">ici</a> </p></blockquote>
<p></p>
<h3>Vue dâ€™ensemble</h3>
<p>Traditionnellement, publier un livre câ€™est : </p>
<ol><li><p>Ã‰crire un manuscrit</p></li><li><p>Trouver une maison dâ€™Ã©dition</p></li><li><p>Travailler avec des illustrateurs et des designers pour mettre en page lâ€™ouvrage</p></li><li><p>Missionner une Ã©quipe marketing pour la diffusion de lâ€™ouvrage</p></li><li><p>Contacter des imprimeurs et des relieurs pour la fabrication de lâ€™ouvrage</p></li><li><p>Conclure avec un distributeur pour acheminer le livre en librairie</p></li></ol>
<p>Câ€™est un processus qui mobilise un grand nombre dâ€™acteurs et prÃ©sente deux barriÃ¨res majeurs. PremiÃ¨rement, il y a la barriÃ¨re de la sÃ©lection : peu de personnes passent le cap de lâ€™Ã©tape 2. Ensuite, si vous signez un contrat Ã  compte dâ€™auteur, il reste une barriÃ¨re financiÃ¨re puisque câ€™est Ã  vous dâ€™avancer les frais de conception et de fabrication.</p>
<p>Ce qui est dingue avec les solutions dâ€™auto-Ã©dition et lâ€™Ã©mergence de lâ€™impression Ã  la demande, câ€™est quâ€™il est possible de gÃ©rer soi-mÃªme une grande partie des Ã©tapes, de publier un ouvrage sans permission, et sans avoir Ã  avancer de frais.</p>
<p>Dans ce projet, lâ€™Ã©tape 1 est dÃ©jÃ  bien prÃ©mÃ¢chÃ©e puisque je vais me baser des textes dÃ©jÃ  existants. Lâ€™Ã©tape 2 se change en â€œchoisir un service dâ€™auto Ã©ditionâ€. Le service dâ€™auto-Ã©dition va prendre en charge les Ã©tapes 5 et 6. Il me reste donc le troisiÃ¨me point (la mise en page), et le quatriÃ¨me point (la diffusion).</p>
<p>[Faire un schÃ©ma classique vs pour le projet avec des photos de moi avec un pouce]</p>
<p></p>
<h2>Choisir une solution dâ€™auto-Ã©dition</h2>
<p>Il existe des dizaines de solutions dâ€™auto-Ã©dition : Lulu Xpress, Blurb, Amazon Kindle Direct Publishing (KDP), Coollibri, Ingram, The Book Edition, Librinova, Iggybook, Publishroom, Bookelis, â€¦</p>
<p>Parmi les plus importantes : </p>
<ul><li><p><a href="https://kdp.amazon.com/fr_FR/">Amazon KDP</a> est la solution dâ€™auto-Ã©dition dâ€™Amazon. Elle permet de publier de eBooks aussi bien que des livres papier (reliÃ©s ou brochÃ©s) et est adaptÃ©e Ã  tous types de contenu (romans, livres pour enfant, bandes dÃ©ssinÃ©es, â€¦). Les livres publiÃ©s sur Amazon KDP ne sont disponibles que sur Amazon. <a href="https://kdp.amazon.com/fr_FR/help/topic/G200634280">Lâ€™espace dâ€™aide</a> est complet. Dans le cas des eBooks, il est nÃ©cessaire de publier le livre au format KPF. </p></li><li><p><a href="https://www.lulu.com/">Lulu Xpress</a> a Ã©tÃ© fondÃ©e en 2002 par lâ€™ancien CEO de RedHat. Comme Amazon, elle permet de publier de eBooks aussi bien que des livres papier. Le design du site exprime Ã©rgonomie et simplicitÃ©. La platforme met Ã  disposition des templates Word et InDesign avec des presets dâ€™export. Le service gÃ¨re lui mÃªme lâ€™obtention de lâ€™ISBN. Lâ€™option â€œglobal distributionâ€ permet de distribuer son livre papier sur Amazon et le rends disponible en commande dans â€œtoutes les bonnes librairiesâ€ via le rÃ©seau du groupe Hachette.</p></li></ul>
<p>Sans trop hÃ©siter, je suis parti sur Lulu.</p>
<p></p>
<h2>Le processus Ã©ditorial</h2>
<div class="captioned-image-container"><img src="images/1024e141-54f7-4c03-af98-a7f49637f5f3_522x281.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Visualisation schÃ©matique du processus Ã©ditorial</p></div>
<p></p>
<h3>RÃ©cupÃ©rer les textes</h3>
<p>Pour aller plus vite, jâ€™ai demandÃ© Ã  ChatGPT de lister les 50 fables de La Fontaine les plus populaires. Ces textes sont depuis longtemps dans le domaine public et on les retrouve facilement sur internet. Beaucoup sont sur WikipÃ©dia. Souvent, je suis allÃ© les rÃ©cupÃ©rer Ã  la main sur ce site <a href="http://www.mesfables.com/livre-1/01-la-cigale-et-la-fourmi.html">mes-fables.com</a>. </p>
<p><em>AmÃ©lioration possible de cette Ã©tape : automatiser le processus avec un script navigateur.</em></p>
<h3>SÃ©lectionner</h3>
<p>Pour cette Ã©tape, jâ€™ai lu lâ€™ensemble des textes rÃ©cupÃ©rÃ© et ai utilisÃ© deux critÃ¨res de sÃ©lection. </p>
<ol><li><p>Est-ce que le texte dÃ©clenche une Ã©motion chez moi ? est-ce que son message est toujours dâ€™actualitÃ© ?</p></li><li><p>Est-ce que câ€™est un â€œÃ  connaitreâ€ ? est-ce que câ€™est une fable dont les <a href="https://fr.wikipedia.org/wiki/Fables_de_La_Fontaine#Vers_et_moralit%C3%A9s_les_plus_souvent_cit%C3%A9es">vers et la moralitÃ© sont les plus frÃ©quemment citÃ©es</a> ? </p></li></ol>
<p><em>AmÃ©lioration possible : appliquer ce processus aux 249 fables plutÃ´t quâ€™Ã  une prÃ©-selection </em></p>
<h3>Choisir lâ€™ordre dâ€™apparition des textes</h3>
<p>Au fil de la lecture, jâ€™ai taguÃ© chaque fable avec des Ã©mojis. </p>
<ul><li><p>â­ï¸ (incontournable)</p></li><li><p>â¤ï¸ (jâ€™adore)</p></li><li><p>ğŸ˜‚ (lol)</p></li><li><p>ğŸ˜µâ€ğŸ’« (pas compris)</p></li><li><p>ğŸ‘ (ok)</p></li></ul>
<div class="captioned-image-container"><img src="images/30bd1049-7b4f-4759-abdf-f10493e36fba_2534x888.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Annotations des fables dans une feuille de calcul</p></div>
<p>Mon premier critÃ¨re de tri a Ã©tÃ© de mettre en premier les fables â­ï¸ et â¤ï¸. </p>
<p>Le deuxiÃ¨me a Ã©tÃ© de mettre les plus courtes en premier, pour offrir des rÃ©compenses rapides au lecteur et lui donner envie dâ€™aller plus loin dans la lecture. </p>
<p>On peut voir cela comme un deuxiÃ¨me niveau dâ€™application du <a href="https://fr.wikipedia.org/wiki/Principe_de_Pareto">principe de Pareto</a>. Le livre ambitionne de regrouper les 20% des fables qui apportent 80% de la â€œsagesseâ€. Les premiers 20% du livre tentent dâ€™apporter eu aussi un maximum de valeur. </p>
<p><em>AmÃ©lioration possible : avoir une Ã©valuation plus fine que les trois cas (rien), </em>ğŸ‘, â¤ï¸. <br/></p>
<h2>CrÃ©er les illustrations</h2>
<p>Une fois la solution dâ€™auto-Ã©dition choisie, le gros du projet consiste Ã  gÃ©nÃ©rer les illustrations. </p>
<p>Pour aller au plus simple, jâ€™ai dâ€™abord testÃ© de donner directement le texte complet et en franÃ§ais de la fable Ã  Midjourney, mais les rÃ©sultats nâ€™Ã©taient pas brillants. </p>
<p>En itÃ©rant, je suis finalement arrivÃ© au processus suivant :</p>
<div class="captioned-image-container"><img src="images/321610f1-f926-438e-9b04-73cf6147ef67_861x281.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Vue globale du processus de gÃ©nÃ©ration des illustrations</p></div>
<h3>Traduire en anglais</h3>
<p>GPT comprend le franÃ§ais mais saisi mieux lâ€™anglais. Afin de lâ€™aider, jâ€™ai rÃ©digÃ© un script qui utilise lâ€™API de <a href="https://www.deepl.com/translator">DeepL</a> pour traduire chaque fable. Ã€ ce stade que jâ€™ai abandonnÃ© ma feuille de calcul pour basculer sur <a href="https://airtable.com/">Airtable</a> afin de simplifier lâ€™accÃ¨s aux informations dans les scripts.<br/></p>
<p>Cette Ã©tape gÃ©nÃ¨re la colonne â€œTraductionâ€ Ã  partir de la colonne â€œTexteâ€.</p>
<div class="captioned-image-container"><img src="images/8da25672-9552-44b1-aefc-df9d03f5355f_3024x920.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">AperÃ§u de la table Airtable oÃ¹ les donnÃ©es relatives Ã  chaques fables sont stockÃ©es</p></div>
<p><em>AmÃ©lioration possible : mesurer la qualitÃ© des descriptions visuelles gÃ©nÃ©rÃ©es par ChatGPT avec ou sans prompt.</em></p>
<p></p>
<h3>DÃ©crire une scÃ¨ne avec ChatGPT</h3>
<p>LÃ , on arrive sur les parties Ã©pineuses. </p>
<p>Jâ€™ai testÃ© des dizaines de prompts pour demander Ã  ChatGPT de dÃ©crire une fable en une image. Celui que jâ€™ai retenu est le suivant.</p>
<blockquote><p>You are an experienced illustrator. The goal is to create a prompt for a text to image generator. I will give you a tale. I want to depict the most representative scene of the tale. Answer using short sentences. Use less than 30 words. Focus on the subjects, the environment and the major event of the tale. <br/><br/>{la fable traduite en anglais}</p></blockquote>
<p>Le prompt peut Ãªtre analysÃ© de la faÃ§on suivante : </p>
<ul><li><p><em>You are an experienced illustrator</em> : le rÃ´le Ã  jouer</p></li><li><p><em>The goal is to create a prompt for a text to image generator</em> : objectif</p></li><li><p>I <em>want to depict the most representative scene of the tale</em> : dans les premiÃ¨res versions, ChatGPT avait tendance Ã  rÃ©sumer lâ€™histoire et dÃ©crire plusieurs scÃ¨nes. Ã‰videmment, cela nâ€™aide pas Midjourney Ã  crÃ©er des images cohÃ©rentes. Ici, je lui demande de se concentrer sur une seule scÃ¨ne.</p></li></ul>
<ul><li><p><em>Answer using short sentences. Use less than 30 words</em> : Les prompts ont tendance Ã  Ãªtre longs. Or, lorsque la description est faite de phrases Ã  rallonge, Midjourney part facilement en vrille sur lâ€™interprÃ©tation. Je prÃ©fÃ¨re lui donner peu dâ€™informations mais quâ€™il colle au prompt plutÃ´t que de lui donner trop dâ€™informations et quâ€™il ne tienne compte que de la moitiÃ©.</p></li><li><p><em>Focus on the subjects, the environment and the major event of the tale</em> : donner Ã  Midjourney des indications sur les principaux Ã©lÃ©ments Ã  reprÃ©senter. Le dÃ©cor, les personnages, lâ€™action.</p><p></p></li></ul>
<h3>Prendre en main Midjourney et calibrer le prompt</h3>
<p>Midjourney est un programme qui permet de gÃ©nÃ©rer des images Ã  partir de descriptions textuelles. Il se distingue des autres logiciels du mÃªme genre tels que StableDiffusion et Dall-E par sa tendance naturelle Ã  gÃ©nÃ©rer des images esthÃ©tiques, ce qui est bien adaptÃ© Ã  la crÃ©ation dâ€™un livre illustrÃ©.</p>
<p>En plus de la description visuelle, il est possible dâ€™utiliser des paramÃ¨tres pour guider la gÃ©nÃ©ration. </p>
<p>Afin de me familiariser avec Midjourney, jâ€™ai sÃ©lectionnÃ© trois fables (le chÃªne et le roseau, le rat des villes et le rat des champs, la cigale et la fourmi) et ai testÃ© diffÃ©rentes variations de :</p>
<ul><li><p>Style : <em>â€œcyanotypeâ€, â€œcontemporary illustration, bold colors, dynamic compositionâ€, â€œ<a href="https://cdn.discordapp.com/attachments/1089155086925705336/1089806385262370906/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_142c4379-0766-48a0-93ec-91ef17e42df2.png">minimalist neo pop style</a>â€, â€œ<a href="https://cdn.discordapp.com/attachments/1089155086925705336/1089639875566903416/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_9b23be8c-601e-4fcb-8d2c-3c0691a05d04.png">moebius</a>â€, â€œ<a href="https://cdn.discordapp.com/attachments/1089155086925705336/1089641314909442058/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_a690ec99-5875-4115-bdaa-13e2154a200d.png">naive art</a>â€, â€œ<a href="https://cdn.discordapp.com/attachments/1089155086925705336/1089797825522585630/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_95e8dee5-f391-4c4d-b13c-731be9218506.png">op art</a>â€, â€œ<a href="https://cdn.discordapp.com/attachments/1089155086925705336/1089799181973078046/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_328d7f57-69a1-49b4-bd9c-c6f57215819b.png">zentangle</a>â€, â€œiridescentâ€, â€œcolorful geometricâ€, â€œAirbrush surrealismâ€, â€œContrast of resilience, watercolor style with expressive brushstrokesâ€, â€œY2K grunge grimy textures, chrome metallics, broken grids and amorphous shapesâ€, â€œVintage computer graphicsâ€â€¦</em></p></li><li><p>Description</p></li><li><p>chaos : 0, 1000</p></li><li><p>stylize : 0, 100, 1000</p></li><li><p>graine alÃ©atoire (seed)</p></li></ul>
<div class="captioned-image-container"><img src="images/350b74bc-e969-4e2d-9d12-682e836533dd_4096x4096.jpeg"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Test de diffÃ©rents styles graphiques dans Midjourney</p></div>
<p></p>
<p>Rapidement, plusieurs problÃ¨mes/limitations sont apparues : </p>
<ul><li><p>Explorer au hasard et Ã  la main un problÃ¨me Ã  cinq dimensions nâ€™est pas efficace. MÃªme aprÃ¨s y avoir passÃ© plusieurs heures, il reste difficile de tirer des conclusions sur â€œest-ce que je vais dans la bonne direction avec ce jeu de paramÃ¨tresâ€</p></li></ul>
<ul><li><p>Lorsque le prompt dÃ©crit plusieurs animaux, le moteur tends Ã  mÃ©langer les deux. Par exemple, le prompt <em><a href="https://cdn.discordapp.com/attachments/1089155086925705336/1090970693698592879/lx_a_dog_and_a_rabbit_in_a_landscape_playing_hapiness_colorfull_0606586f-1bb7-46be-8d26-5e9a03b54b5d.png">â€œa dog and a rabbit in a landscape playing hapiness colorfullâ€</a> </em>gÃ©nÃ¨re un lapin avec une langue de chien, et un chien avec des oreilles de lapinâ€¦ </p></li><li><p>Midjourney a du mal Ã  reprÃ©senter certains animaux. Lorsque lâ€™on demande une pie, lâ€™animal quâ€™il dessine prÃ©sente parfois davantage les traits dâ€™un corbeau. Lorsque lâ€™on demande une belette, il esquisse une sourisâ€¦</p></li><li><p>Le moteur tends Ã  prendre ses libertÃ© par rapport aux instructions. Il va globalement coller au prompt, mais nâ€™intÃ¨gre pas toujours tous les Ã©lÃ©ments. </p></li><li><p>Le images gÃ©nÃ©rÃ©es tendent Ã  prÃ©senter de nombreuses inconsistences : un troisiÃ¨me bras, une jambe en moins, â€¦</p></li></ul>
<p></p>
<p><em>AmÃ©lioration possible : </em></p>
<ul><li><p><em>commencer par 1) explorer de faÃ§on libre et sur un temps dÃ©limitÃ© pour explorer les limites et les paramÃ¨tres importants puis 2) explorer de faÃ§on mÃ©thodique</em></p></li><li><p><em>cette Ã©tape nâ€™est pas nÃ©cessaire Ã  la mise en place du walking skeleton : pour commencer, il serait tout Ã  fait possible de gÃ©nÃ©rer des images sans prÃ©ciser le style et avec les paramÃ¨tres par dÃ©faut puis de revenir plus tard Ã  cette Ã©tape pour lâ€™amÃ©liorer</em></p></li><li><p><em>jouer avec le paramÃ¨tre â€œqualityâ€ (qui nâ€™influe pas sur la qualitÃ© de lâ€™image comme je lâ€™ai dâ€™abord interprÃªtÃ© mais sur la â€œqualitÃ© du dessinâ€).</em></p></li></ul>
<p></p>
<h3>Automatiser la gÃ©nÃ©ration des images</h3>
<p>Lâ€™un des objectifs de ce projet est dâ€™automatiser au maximum chaque Ã©tape. GÃ©nÃ©rer de longues sÃ©ries dâ€™images avec Midjourney est particuliÃ¨rement fastidieux puisque pour chaque image, cela consiste Ã  : </p>
<ol><li><p>Entrer le prompt</p></li><li><p>GÃ©nÃ©rer une grille de quatre propositions (~ 1min)</p></li><li><p>Agrandir une image (10s) ou relancer une grille de propositions (retour Ã  lâ€™Ã©tape 2)</p></li><li><p>Enregistrer lâ€™image</p></li></ol>
<p></p>
<p>Lâ€™automatisation de cette Ã©tape prÃ©sente ainsi deux intÃ©rÃªts : </p>
<ul><li><p>Mettre Ã  jour lâ€™Ã©dition avec une nouvelle version de Midjourney devient simple. Il suffit de relancer le script de gÃ©nÃ©ration pour chaque fable.</p></li></ul>
<ul><li><p>Explorer de faÃ§on mÃ©thodique un grand nombre de styles, de paramÃ¨tres et de descriptions</p></li></ul>
<p></p>
<p>Malheureusement, il nâ€™existe pas dâ€™API officielle de Midjourney, et lâ€™automatisation va Ã  lâ€™encontre de leurs <a href="https://docs.midjourney.com/docs/terms-of-service">conditions dâ€™utilisation</a>. Cependant, il existe tout de mÃªme plusieurs faÃ§ons dâ€™automatiser le processus. </p>
<ul><li><p>Utiliser une api non officielles : <a href="https://www.theinsaneapp.com/2023/05/midjourney-api.html">cet article</a> en rÃ©fÃ©rence plusieurs </p></li><li><p>CrÃ©er son propre bot Discord pour servir de proxy : il est ainsi possible dâ€™interagir avec via son bot, qui lui interagit alors avec le bot de Midjourney. </p></li><li><p>Automatiser la souris et le clavier avec des outils comme <a href="https://pyautogui.readthedocs.io/en/latest/#">PyAutoGUI</a> ou son navigateur avec des outils comme <a href="https://pptr.dev/">Puppeteer</a>, <a href="https://www.selenium.dev/">Selenium</a> ou <a href="https://playwright.dev/python/">Playwright</a>.</p></li></ul>
<p></p>
<h4>Option 1 : Utiliser une api non officielles</h4>
<p>Les API non officielles sont payantes. Or, jâ€™ai dÃ©jÃ  un abonnement Ã  Midjourney et ne veux pas payer en double. Aussi, Ã©tant dans une dÃ©marche de construction, jâ€™ai rapidement Ã©cartÃ© ces options et ne les ai pas creusÃ©es davantage. </p>
<p></p>
<h4>Option 2 : CrÃ©er mon propre Bot Discord</h4>
<p>Câ€™est lâ€™option qui mâ€™a dâ€™abord parue la plus sÃ©duisante. </p>
<p>Jâ€™ai donc explorÃ© cette piste et ai Ã©tÃ© agrÃ©ablement surpris de voir Ã  quel point il est simple de crÃ©er un bot Discord. La bibliothÃ¨que python <a href="https://github.com/Rapptz/discord.py">discord.py</a> est simple Ã  prendre en main et il est rapide de coder ses premiÃ¨res interactions. </p>
<p>Par contre, je nâ€™ai pas rÃ©ussi Ã  faire communiquer mon bot avec le bot de Midjourney (pour Ãªtre prÃ©cis, je nâ€™ai pas trouvÃ© comment faire pour envoyer une â€œslash commandâ€ au bot de midjourney Ã  partir de mon bot). Jâ€™ai bloquÃ© toute une aprÃ¨s-midi sur la question.</p>
<p>En allant chercher de lâ€™aide sur le serveur Discord de discord.py, jâ€™ai vu que dâ€™autres personnes rencontraient le mÃªme problÃ¨me que moi. La rÃ©ponse Ã©tait toujours lÃ  mÃªme : <a href="https://discord.com/channels/336642139381301249/985299059441025044/threads/1075203228255395923">â€œles bots ne peuvent pas invoquer de slash commandsâ€</a>.</p>
<p>Essayons autre chose.</p>
<p></p>
<h4>Option 3 : Lâ€™automatisation navigateur</h4>
<p>Les automatisations navigateur sont rÃ©pandues dans le monde du dÃ©veloppement logiciel oÃ¹ elles servent Ã  vÃ©rifier le bon fonctionnement de lâ€™application du point de vue de lâ€™utilisateur. </p>
<h5>Choisir une bibliothÃ¨que</h5>
<p>En python, les deux principaux outils pour automatiser les interactions avec un navigateur sont <a href="https://pypi.org/project/selenium/">Selenium</a> et <a href="https://playwright.dev/python/">Playwright</a>.</p>
<ul><li><p>Selenium existe depuis 2004, est open-source et bÃ©nÃ©ficie dâ€™une large communautÃ© dâ€™utilisateurs. Câ€™est un standard de lâ€™industrie, Ã  tel point que son interface WebDriver a Ã©tÃ© ajoutÃ© au recommandations de lâ€™organisme de standardisation W3C en 2018 (<a href="https://www.w3.org/TR/webdriver1/">ref</a>).</p></li><li><p>Playwright lui est tout jeune. Il a Ã©tÃ© publiÃ© en 2020 par Microsoft et met en avant le fait dâ€™Ãªtre conÃ§u pour le web moderne. Il supporte moins de navigateurs que Selenium, mais est plus performant.</p></li></ul>
<p>Dans notre contexte, les deux outils sont parfaitement adaptÃ©. Jâ€™ai donc suivi mon envie et suis parti sur lâ€™option Playwright.</p>
<h5>Coder lâ€™automation</h5>
<p>Pour rÃ©pondre aux besoins du projet, jâ€™ai mis en place deux automations. La premiÃ¨re gÃ©nÃ¨re une planche de suggestion pour chaque fable. La deuxiÃ¨me, dÃ©crite plus bas, agrandit les images sÃ©lectionnÃ©es via la mÃ©thode â€œupscaleâ€ fournie par Midjourney.</p>
<p>Les automatisations de navigateur procÃ¨dent de la faÃ§on suivant : </p>
<ol><li><p>Cibler un Ã©lÃ©ment de la page</p></li><li><p>Interagir avec lâ€™Ã©lÃ©ment ciblÃ©</p></li></ol>
<p>Pour accÃ©lÃ©rer cette partie, jâ€™ai me suis directement inspirÃ© de <a href="https://github.com/passivebot/midjourney-automation-bot/blob/main/upscale_midjourney_downloader.py">ce script</a> en rÃ©cupÃ©rant les fonctions dont jâ€™avais besoin, au moment oÃ¹ jâ€™en avais besoin.</p>
<h3>Le pipeline de sÃ©lection</h3>
<p>Les outils d'IA facilitent le processus de divergence et la gÃ©nÃ©ration d'options. Cependant, une fois les propositions gÃ©nÃ©rÃ©es, il reste encore Ã  choisir celle que lâ€™on veut utiliser, lâ€™agrandir, la passer en 300 dpi (en vue de lâ€™impression), puis Ã  la placer dans le dossier assets du livre afin que lâ€™image soit chargÃ©e dans le projet.</p>
<p>Ce processus peut rapidement devenir chronophage et dÃ©sordonnÃ©. Afin de l'automatiser et de le fluidifier, j'ai mis en place le pipeline suivant. A chaque fois, un script permet de passer d'une Ã©tape Ã  la suivante et toutes les donnÃ©es intermÃ©diaires sont mÃ©morisÃ©es.</p>
<div class="captioned-image-container"><img src="images/d2905cd3-aaf3-45b6-ba26-23108eba22b2_1571x741.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;"></p></div>
<p>Prennons lâ€™exemple de la fable â€œLe Renard et les Raisinsâ€.</p>
<ol><li><p>La planche de suggestion du job <code>1b197be7</code> est enregistrÃ©e dans le dossier <code>1_Grille/Le Renard et les Raisins/1b197be7.png</code></p></li><li><p>Un script python parcours de faÃ§on rÃ©cursive les dossiers qui sont dans <code>1_Grille</code>, dÃ©coupe lâ€™image en quatre puis enregistre chaque morceau dans le dossier <code>2_Splits</code> en conservant le dossier intermÃ©diaire qui indique le nom de la fable et en ajoutant le suffixe <code>U1</code>, <code>U2</code>, <code>U3</code> ou <code>U4</code> au nom de lâ€™image pour indiquer sa position dans la grille initiale. </p></li><li><p>Dans le finder, jâ€™utilise la preview avec la touche espace pour comparer les images puis renomme ma favorite en la prÃ©fixant par une Ã©toile.</p></li><li><p>Un script python rÃ©cupÃ¨re toutes les images qui sont prÃ©fixÃ©es, les agrandit en entrant dans Discord la commande Midjourney <code>/show 1b197be7</code> puis en cliquant sur le bouton upscale correspondant au morceau. Par exemple, <code>U1</code>.</p></li><li><p>Un script python rÃ©cupÃ¨re les images qui ont Ã©tÃ© agrandies, les passe en 300 dpi, puis les copie dans le dossier ressources du livre.</p></li></ol>
<p></p>
<p><em>AmÃ©lioration possible : </em></p>
<ul><li><p><em>upscaler et passer en 300 dpi de faÃ§on systÃ©matique permettrait de rÃ©duire le nombre dâ€™Ã©tapes et de simplifier le processus. Passer une image en 300 dpi est quasiment instantanÃ© et le coÃ»t de lâ€™upscale est nÃ©gligeable en phase dâ€™exploration.</em></p></li></ul>
<p></p>
<h2>Mettre en page le livre</h2>
<p></p>
<h4>Choisir un outil de mise en page</h4>
<p>Toujours en ayant en tÃªte de produire une solution la plus automatisÃ©e et â€œmise-Ã -jour-ableâ€ possible, jâ€™ai dâ€™abord essayer de trouver un outil qui permette de â€œgÃ©nÃ©rerâ€ un livre Ã  partir de code. </p>
<p>Je nâ€™ai pas trouvÃ© de tels outils Ã  proprement parler.</p>
<p>Les outils <em>Markdown to PDF</em> se rapprochent de cette idÃ©e, mais derriÃ¨re, les options de mise en page sont assez limitÃ©es ou â€œhackyâ€. </p>
<p><a href="https://www.latex-project.org/">LaTeX</a> que jâ€™ai utilisÃ© pendant mes Ã©tudes rÃ©ponds bien Ã  cette envie dâ€™automatisation. Avec LaTeX, le contenu est sÃ©parÃ© de la mise en page. Il est donc possible de gÃ©rer chaque chose sÃ©parÃ©mment. Seulement, produire un joli style nâ€™est pas aisÃ©. Lâ€™outil sâ€™adresse davantage aux chercheurs et aux scientifiques quâ€™aux designers et aux auteurs de livres pour enfants.</p>
<p>Il vient ensuite les deux principales solutions du marchÃ© : <a href="https://www.adobe.com/fr/products/indesign.html">InDesign</a> et <a href="https://www.canva.com/">Canva</a> : </p>
<ul><li><p>InDesign est un logiciel de mise en page dÃ©velopÃ© par Adobe et publiÃ© pour la premiÃ¨re fois en 1999. Câ€™est un standard de lâ€™industrie de la mise en page, mais aussi un produit qui est complexe Ã  aborder de prime abord. Son prix est assez Ã©levÃ©. De faÃ§on plus personnelle, câ€™est un produit que jâ€™affectionne. Cela fait longtemps que je ne lâ€™ai pas utilisÃ©, mais jâ€™ai beaucoup utilisÃ© par le passÃ© (comme pour ce portfolio rÃ©alisÃ© en 2015).</p></li><li><p>Canva est un logiciel de conception graphique dont la premiÃ¨re version a Ã©tÃ© publiÃ©e en 2008. Cet outil est nÃ© en rÃ©action Ã  InDesign avec la volontÃ© de proposer un outil sans installation et simple dâ€™utilisation. Sa popularitÃ© a explosÃ©e en 2019 et câ€™est une solution particuliÃ¨rement adaptÃ© Ã  la crÃ©ation de supports visuels en ligne.</p></li></ul>
<p>Les deux outils me paraissent adaptÃ© au problÃ¨me, mais je pense quâ€™InDesign offre dâ€™avantage dâ€™options dâ€™automatisation. Jâ€™espÃ¨re quâ€™apprendre Ã  lâ€™utiliser va vite revenir et Lulu propose justement des templates InDesign pour rÃ©aliser la maquette du livre. Alors go pour InDesign. </p>
<p></p>
<h4>Executer la mise en page</h4>
<p>Pour mettre en page le livre, jâ€™ai procÃ©dÃ© de la faÃ§on suivante :</p>
<ol><li><p>RÃ©cupÃ©rer le <a href="https://www.lulu.com/publishing-toolkit">template InDesign</a> proposÃ© par Lulu</p></li><li><p>Mettre en page une fable reprÃ©sentative. En analysant les textes sÃ©lectionnÃ©, on note que les fables font en moyenne un peu plus de 31 lignes et que cela correspond aussi Ã  la valeur mÃ©diane : la moitiÃ© des fables sÃ©lectionnÃ©es font 31 lignes ou moins. IdÃ©alement, jâ€™aurais aimÃ© que pour chaque fable, le texte et lâ€™image tienne dans une double page, ce qui aurait grandement facilitÃ© la mise en page. </p></li><li><p>ConsidÃ©rer mettre de cÃ´tÃ© tous les textes qui ne tiennent pas sur une page. Cela peut faire une Ã©dition agrÃ©able Ã  lire. Mais cela implique de mettre de cÃ´tÃ© certaines de mes fables intÃ©ressantes comme Le Meunier, son Fils et l'Ã‚ne (83 lignes). Si je veux faire un recueil des â€œmeilleures fablesâ€, ce nâ€™est pas une option.</p></li><li><p>ConsidÃ©rer de mettre les textes sur plusieurs colonnes. Mais Ã©tant parti sur du A5, introduire deux colonnes nÃ©cessite de descendre la taille de police Ã  6 pour que les vers tiennent sur une ligne. Câ€™est trop petit.</p></li><li><p>Aller Ã  la Fnac pour voir et toucher la mise en page dâ€™autres livres. </p></li><li><p>Revenir sur InDesign</p></li><li><p><s>Tester diffÃ©rentes polices</s> (pas nÃ©cessaire pour le walking skeleton)</p></li><li><p>Extraire le gabarit </p></li><li><p>Dupliquer la double page, dupliquer, dupliquer â€¦ x60</p></li><li><p>Coller les titres </p></li><li><p>Coller les textes</p></li><li><p>Importer les images</p></li><li><p>GÃ©rer les exceptions : le titres qui ne tiennent pas sur une ligne (coucou La Grenouille qui veut se faire aussi grosse que le BÅ“uf), les textes qui courent sur deux voir trois pages. </p></li><li><p>Ajuster les polices, les marges, la position de la numÃ©rotation, â€¦ les petits dÃ©tails</p></li><li><p>GÃ©nÃ©rer la couverture directement sur Lulu</p></li><li><p>OK, on est bon pour une premiÃ¨re version !</p></li></ol>
<div class="captioned-image-container"><img src="images/7d954b90-e7bc-4d84-9875-191e6180fbaa_3024x1902.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Le maquettage dans InDesign</p></div>
<p></p>
<h2>Finaliser la publication</h2>
<p>Une fois la mise en page terminÃ©e, il ne reste plus quâ€™Ã  finaliser la publication ! </p>
<p>Les instructions fournies par la plateforme sont claires et je nâ€™ai pas rencontrÃ© de problÃ¨mes particuliers Ã  cet Ã©tape. </p>
<p>Au niveau de la fixation des prix, il tout de mÃªme intÃ©ressant de noter que dans le cas dâ€™une distribution globale (Amazon etc), la marge sur chaque vente est extrÃªmement faible. Ici, pour un livre vendu 19â‚¬90 sur Amazon, je touche 1â‚¬06. Dans le cas dâ€™une vente directe ou via le shop de Lulu, la marge est par contre importante, autour de 9â‚¬ par vente.</p>
<div class="captioned-image-container"><img src="images/cd2d2422-5806-460c-83fb-0c77d445a930_2842x1672.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">La fixation du prix sur Lulu</p></div>
<h2>Diffuser le livre</h2>
<p>Pour la diffusion, jâ€™ai prÃ©vu les actions suivantes : </p>
<ol><li><p>Laisser trainer un exemplaire dans lâ€™espace salon du Moho</p></li><li><p>PrÃ©parer 10 posts pour LinkedIn</p></li><li><p>En parler dans cet article de newsletter</p></li></ol>
<h2>Conclusion</h2>
<p>Le rÃ©sultat nâ€™est pas Ã  la hauteur de mes espÃ©rance et jâ€™y ai consacrÃ© deux fois plus de temps quâ€™initiallement prÃ©vu, mais je suis allÃ© au bout ! </p>
<p>Jâ€™ai beaucoup aimÃ© travailler en mode hack et essayer d'utiliser la solution la plus simple et la plus directe pour rÃ©pondre aux besoins. </p>
<p>Techniquement, ce projet aura Ã©tÃ© lâ€™occasion de balayer pas mal de technologies. Replonger dans python, tester Airtable, utiliser lâ€™api DeepL, prototyper un bot Discord, dÃ©couvrir Playwright, remettre les mains dans InDesign.</p>
<h3>Aller plus loin</h3>
<p>Pour aller plus loin, il est possible dâ€™amÃ©liorer lâ€™Ã©dition de la faÃ§on suivante : </p>
<ul><li><p>indiquer les morales de chaque fable sous la forme de conseils activables, en une ligne. Les placer en sous titre ou dans un index placÃ© en dÃ©but ou en fin dâ€™ouvrage. <em>Exemple pour Le Cochon, la ChÃ¨vre et le Mouton : Ne te torture pas l'esprit avec des problÃ¨mes qui Ã©chappent Ã  ton influence.</em></p></li><li><p>ajouter des questions Ã  mÃ©diter. <em>Exemple pour Le Renard et les Raisins : Dans quelles situations de votre vie avez-vous dÃ©jÃ  rationalisÃ© ou minimisÃ© l'importance de quelque chose que vous dÃ©siriez, simplement parce que vous ne pouviez pas l'obtenir ou l'atteindre facilement ?</em></p></li><li><p>mettre Ã  jour l'Ã©dition dans un autre style ou avec une prochaine version de Midjourney </p></li></ul>
<p></p>
<p>Dâ€™autre part, un autre dâ€™angle Ã  explorer est de rÃ©utiliser le processus mis en place pour crÃ©er dâ€™autres ouvrages :</p>
<ul><li><p>50 expressions populaires imagÃ©es : ceintures et bretelles, raconter des salades, â€¦</p></li><li><p>un recueil de contes illustrÃ©s</p></li><li><p>un autre recueil de fables</p></li><li><p>un livre de concepts illustrÃ©s (10x, founder market fit, ...)</p></li><li><p>une version contemporaine des â€œCaractÃ¨resâ€ </p></li><li><p>une version illustrÃ©e et expliquÃ©e des â€œ27 Ã©motionsâ€ </p></li></ul>
<div class="captioned-image-container"><img src="images/4ab8f67f-51cd-4cff-bd0c-151fb0c0f007_1024x1024.png"/><p style="text-align: center; font-style: italic; font-size: 0.8em;">Illustration de lâ€™expression â€œceintures et bretellesâ€. On est jamais trop prudent !</p></div>
<p></p>
<h3>DifficultÃ©s rencontrÃ©es</h3>
<ul><li><p><strong>Rester concentrÃ© sur la mise en place du processus de bout en bout avant de chercher Ã  amÃ©liorer les diffÃ©rentes Ã©tapes</strong>.  Câ€™est dingue comme cette tentation est forte de rester des heures Ã  amÃ©liorer une Ã©tape. Par exemple dans la recherche de style, jâ€™ai eu beaucoup de mal Ã  me dire â€œok partons avec Ã§a et je peaufinerais plus tardâ€. Si je nâ€™avais pas dÃ¨s le dÃ©part eu la ferme intention dâ€™Ã©viter ce type de â€œpiÃ¨geâ€, câ€™est vraiment quelque chose qui aurait pu empÃªcher le projet de se matÃ©rialiser. Au final, la qualitÃ© nâ€™est pas au niveau que jâ€™espÃ©rait, mais le projet est. Et si je veux y consacrer davantage de temps, il mâ€™est posssible de lâ€™amÃ©liorer.</p></li><li><p><strong>DÃ©finir le public visÃ©</strong>. Jâ€™ai beaucoup hÃ©sitÃ© entre adresser lâ€™Ã©ditions aux enfants, ou  Ã  de jeunes adultes, ou Ã  des fans de mangas, ou, ou, ou. Au final, jâ€™ai pris lâ€™option de lâ€™adresser Ã  de jeunes adultes. Mais ne pas avoir une idÃ©e claire de â€œÃ  qui sâ€™adresse lâ€™ouvrageâ€ mâ€™a fait perdre beaucoup de temps en questions et interrogations lors de lâ€™Ã©tape de la mise en page et la recherche du style.</p></li><li><p><strong>Aller au bout de lâ€™itÃ©ration quoi quâ€™il arrive</strong>. En avanÃ§ant dans les expÃ©rimentations, jâ€™ai rapidement compris que les illustrations auraient difficilement lâ€™originalitÃ© et la qualitÃ© que jâ€™espÃ©rait et que la mise en page nâ€™allait pas non plus Ãªtre au niveau ambitionnÃ©. Plusieurs fois je me suis demandÃ© sâ€™il ne vallait pas mieux que je passe directement Ã  un autre projet.</p></li></ul>
<h3>LeÃ§on</h3>
<p>On dit souvent que â€œ<em>lâ€™idÃ©e de vaut rien</em>â€ et que <em>â€œcâ€™est lâ€™exÃ©cution qui compteâ€</em>. Dans ce projet, je me suis rendu compte que, clairement, tant que tu n'as pas essayÃ© de mettre en Å“uvre lâ€™idÃ©e, tu nâ€™as pas idÃ©e du nombre de problÃ¨mes et dâ€™obstacles que tu vas rencontrer. Aussi, le nombre de dÃ©cisions Ã  prendre, et donc de chemins qui partent de lâ€™idÃ©e pour arriver Ã  une concrÃ©tisation, sont tellements nombreux, que lâ€™on peut affirmer que tout se passe dans lâ€™exÃ©cution.</p>
<p></p>
<p>Merci de mâ€™avoir lu jusquâ€™ici ! </p>
<p>Si vous avez aimÃ© cette Ã©dition, nâ€™hÃ©sitez pas Ã  vous abonner ou Ã  la partager autour de vous. </p>
<p class="button-wrapper" data-attrs='{"url":"https://100produits.substack.com/subscribe?","text":"Subscribe now","action":null,"class":null}' data-component-name="ButtonCreateButton"><a class="button primary" href="https://100produits.substack.com/subscribe?"><span>Subscribe now</span></a></p>
<p></p>
<p>Ã€ trÃ¨s vite pour un nouveau projet !</p>
<p>Alexandre</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
    <footer>
      <p>PubliÃ© le <time datetime="2023-10-02T15:28:10.810000+00:00">
        Lun 02 octobre 2023
      </time></p>
    </footer>
  </article>
    </main>
  </body>
</html>