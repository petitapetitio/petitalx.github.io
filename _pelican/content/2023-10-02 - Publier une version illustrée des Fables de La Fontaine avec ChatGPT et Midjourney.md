---
date: 2023-10-02T15:28:10.810Z
title: Ma version des Fables de La Fontaine avec Midjourney
subtitle: Produit #1
---

Hello !

Bienvenue dans _100 produits_.

Ma dÃ©marche est donner vie Ã  des projets en quelques journÃ©es et de documenter
leur rÃ©alisation. PlutÃ´t que de travailler sur LE projet parfait, je vais
multiplier les expÃ©rimentations, explorer les faÃ§ons de trouver des solutions,
mettre les mains dans le cambouis, trouver des hacks, aller droit au but,
copier des idÃ©es de business dÃ©jÃ  existantes, lancer rapidement, itÃ©rer,
amÃ©liorer, et rÃ©pÃ©ter lâ€™expÃ©rience jusqu'Ã  ce qu'elle soit couronnÃ©e de
succÃ¨s.

Cette newsletter sera comme un journal de bord et je publierai une
rÃ©trospective par projet.  
  
Câ€™est parti pour la premiÃ¨re !

## Une version illustrÃ©e des fables de La Fontaine

Jâ€™ai redÃ©couvert les Fables de La Fontaine il y a deux ans, dans [un Ã©pisode
du podcast Artisan DÃ©veloppeur ](https://podcast.ausha.co/artisan-
developpeur/le-loup-et-le-chien)de Benoit Gantaume. Depuis, jâ€™ai souhaitÃ© les
relire. Jâ€™ai achetÃ© deux Ã©ditions, mais aucune ne mâ€™a vraiment plus :

  * La premiÃ¨re est une version de poche. La mise en page est agrÃ©able, mais il nâ€™y a pas dâ€™images et je trouve que cela manque Ã  lâ€™expÃ©rience de lecture.

  * La deuxiÃ¨me est une intÃ©grale illustrÃ©e, en quatre tomes : les images sont belles, mais la mise en page nâ€™est pas agrÃ©able. Aussi, toutes les fables ne se valent pas. Parmi les 243, certaines sont plus universelles que dâ€™autres. Or, je ne recherche pas une encyclopÃ©die sur La Fontaine. Juste des histoires avec des leÃ§ons de vie que je peux mÃ©diter dans mon quotidien. Le 20% qui apportent 80% de la valeur.

Avec la sortie de ChatGPT et la version 4 de Midjourney fin 2022, on a vu de
nombreuses personnes crÃ©er des livres en combinant ces deux technologies et
les mettre en vente sur Amazon, â€œjuste en cliquant sur un boutonâ€ ! Cela mâ€™a
donnÃ© envie dâ€™expÃ©rimenter.  
  
Enfin, je cherchais un prÃ©texte pour me documenter davantage sur ChatGPT et
Midjourney. Les capacitÃ©s esthÃ©tiques de Midjourney sont bluffantes. Et,
quelque part, jâ€™ai pensÃ© que peut-Ãªtre une Ã©dition actualisÃ©e des Fables, avec
des images Ã©poustouflantes, donnerait peut-Ãªtre envie Ã  un public de 20-30 ans
de redÃ©couvrir ces textes.  

Je me suis alors lancÃ© dans ce projet avec en tÃªte :

  * dâ€™automatiser un maximum le processus 

  * dâ€™aller au bout quoi quâ€™il arrive

  * de chercher en premier lieu un produit fini plutÃ´t quâ€™un produit parfait

  * dâ€™y consacrer 5 jours maximum  

Ã‰videmment, tout ne sâ€™est pas passÃ© comme prÃ©vu.

> Le PDF du rÃ©sultat final est visible
> [ici](https://www.dropbox.com/scl/fi/i9rb8ggmcalt74805dqw5/Les-Fables-de-La-
> Fontaine-illustr-es-avec-Midjourney-Alexandre-
> Petit.pdf?rlkey=6dnidl571o887rv8inexo2yub&dl=0)

### Vue dâ€™ensemble

Traditionnellement, publier un livre câ€™est :

  1. Ã‰crire un manuscrit

  2. Trouver une maison dâ€™Ã©dition

  3. Travailler avec des illustrateurs et des designers pour mettre en page lâ€™ouvrage

  4. Missionner une Ã©quipe marketing pour la diffusion de lâ€™ouvrage

  5. Contacter des imprimeurs et des relieurs pour la fabrication de lâ€™ouvrage

  6. Conclure avec un distributeur pour acheminer le livre en librairie

Câ€™est un processus qui mobilise un grand nombre dâ€™acteurs et prÃ©sente deux
barriÃ¨res majeurs. PremiÃ¨rement, il y a la barriÃ¨re de la sÃ©lection : peu de
personnes passent le cap de lâ€™Ã©tape 2. Ensuite, si vous signez un contrat Ã 
compte dâ€™auteur, il reste une barriÃ¨re financiÃ¨re puisque câ€™est Ã  vous
dâ€™avancer les frais de conception et de fabrication.

Ce qui est dingue avec les solutions dâ€™auto-Ã©dition et lâ€™Ã©mergence de
lâ€™impression Ã  la demande, câ€™est quâ€™il est possible de gÃ©rer soi-mÃªme une
grande partie des Ã©tapes, de publier un ouvrage sans permission, et sans avoir
Ã  avancer de frais.

Dans ce projet, lâ€™Ã©tape 1 est dÃ©jÃ  bien prÃ©mÃ¢chÃ©e puisque je vais me baser des
textes dÃ©jÃ  existants. Lâ€™Ã©tape 2 se change en â€œchoisir un service dâ€™auto
Ã©ditionâ€. Le service dâ€™auto-Ã©dition va prendre en charge les Ã©tapes 5 et 6. Il
me reste donc le troisiÃ¨me point (la mise en page), et le quatriÃ¨me point (la
diffusion).

[Faire un schÃ©ma classique vs pour le projet avec des photos de moi avec un
pouce]

## Choisir une solution dâ€™auto-Ã©dition

Il existe des dizaines de solutions dâ€™auto-Ã©dition : Lulu Xpress, Blurb,
Amazon Kindle Direct Publishing (KDP), Coollibri, Ingram, The Book Edition,
Librinova, Iggybook, Publishroom, Bookelis, â€¦

Parmi les plus importantes :

  * [Amazon KDP](https://kdp.amazon.com/fr_FR/) est la solution dâ€™auto-Ã©dition dâ€™Amazon. Elle permet de publier de eBooks aussi bien que des livres papier (reliÃ©s ou brochÃ©s) et est adaptÃ©e Ã  tous types de contenu (romans, livres pour enfant, bandes dÃ©ssinÃ©es, â€¦). Les livres publiÃ©s sur Amazon KDP ne sont disponibles que sur Amazon. [Lâ€™espace dâ€™aide](https://kdp.amazon.com/fr_FR/help/topic/G200634280) est complet. Dans le cas des eBooks, il est nÃ©cessaire de publier le livre au format KPF. 

  * [Lulu Xpress](https://www.lulu.com/) a Ã©tÃ© fondÃ©e en 2002 par lâ€™ancien CEO de RedHat. Comme Amazon, elle permet de publier de eBooks aussi bien que des livres papier. Le design du site exprime Ã©rgonomie et simplicitÃ©. La platforme met Ã  disposition des templates Word et InDesign avec des presets dâ€™export. Le service gÃ¨re lui mÃªme lâ€™obtention de lâ€™ISBN. Lâ€™option â€œglobal distributionâ€ permet de distribuer son livre papier sur Amazon et le rends disponible en commande dans â€œtoutes les bonnes librairiesâ€ via le rÃ©seau du groupe Hachette.

Sans trop hÃ©siter, je suis parti sur Lulu.

## Le processus Ã©ditorial

[![](https://substack-post-
media.s3.amazonaws.com/public/images/1024e141-54f7-4c03-af98-a7f49637f5f3_522x281.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2F1024e141-54f7-4c03-af98-a7f49637f5f3_522x281.png)Visualisation
schÃ©matique du processus Ã©ditorial

### RÃ©cupÃ©rer les textes

Pour aller plus vite, jâ€™ai demandÃ© Ã  ChatGPT de lister les 50 fables de La
Fontaine les plus populaires. Ces textes sont depuis longtemps dans le domaine
public et on les retrouve facilement sur internet. Beaucoup sont sur
WikipÃ©dia. Souvent, je suis allÃ© les rÃ©cupÃ©rer Ã  la main sur ce site [mes-
fables.com](http://www.mesfables.com/livre-1/01-la-cigale-et-la-fourmi.html).

_AmÃ©lioration possible de cette Ã©tape : automatiser le processus avec un
script navigateur._

### SÃ©lectionner

Pour cette Ã©tape, jâ€™ai lu lâ€™ensemble des textes rÃ©cupÃ©rÃ© et ai utilisÃ© deux
critÃ¨res de sÃ©lection.

  1. Est-ce que le texte dÃ©clenche une Ã©motion chez moi ? est-ce que son message est toujours dâ€™actualitÃ© ?

  2. Est-ce que câ€™est un â€œÃ  connaitreâ€ ? est-ce que câ€™est une fable dont les [vers et la moralitÃ© sont les plus frÃ©quemment citÃ©es](https://fr.wikipedia.org/wiki/Fables_de_La_Fontaine#Vers_et_moralit%C3%A9s_les_plus_souvent_cit%C3%A9es) ? 

_AmÃ©lioration possible : appliquer ce processus aux 249 fables plutÃ´t quâ€™Ã  une
prÃ©-selection_

### Choisir lâ€™ordre dâ€™apparition des textes

Au fil de la lecture, jâ€™ai taguÃ© chaque fable avec des Ã©mojis.

  * â­ï¸ (incontournable)

  * â¤ï¸ (jâ€™adore)

  * ğŸ˜‚ (lol)

  * ğŸ˜µâ€ğŸ’« (pas compris)

  * ğŸ‘ (ok)

[![](https://substack-post-
media.s3.amazonaws.com/public/images/30bd1049-7b4f-4759-abdf-f10493e36fba_2534x888.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2F30bd1049-7b4f-4759-abdf-f10493e36fba_2534x888.png)Annotations
des fables dans une feuille de calcul

Mon premier critÃ¨re de tri a Ã©tÃ© de mettre en premier les fables â­ï¸ et â¤ï¸.

Le deuxiÃ¨me a Ã©tÃ© de mettre les plus courtes en premier, pour offrir des
rÃ©compenses rapides au lecteur et lui donner envie dâ€™aller plus loin dans la
lecture.

On peut voir cela comme un deuxiÃ¨me niveau dâ€™application du [principe de
Pareto](https://fr.wikipedia.org/wiki/Principe_de_Pareto). Le livre ambitionne
de regrouper les 20% des fables qui apportent 80% de la â€œsagesseâ€. Les
premiers 20% du livre tentent dâ€™apporter eu aussi un maximum de valeur.

_AmÃ©lioration possible : avoir une Ã©valuation plus fine que les trois cas
(rien),_ ğŸ‘, â¤ï¸.  

## CrÃ©er les illustrations

Une fois la solution dâ€™auto-Ã©dition choisie, le gros du projet consiste Ã 
gÃ©nÃ©rer les illustrations.

Pour aller au plus simple, jâ€™ai dâ€™abord testÃ© de donner directement le texte
complet et en franÃ§ais de la fable Ã  Midjourney, mais les rÃ©sultats nâ€™Ã©taient
pas brillants.

En itÃ©rant, je suis finalement arrivÃ© au processus suivant :

[![](https://substack-post-
media.s3.amazonaws.com/public/images/321610f1-f926-438e-9b04-73cf6147ef67_861x281.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2F321610f1-f926-438e-9b04-73cf6147ef67_861x281.png)Vue
globale du processus de gÃ©nÃ©ration des illustrations

### Traduire en anglais

GPT comprend le franÃ§ais mais saisi mieux lâ€™anglais. Afin de lâ€™aider, jâ€™ai
rÃ©digÃ© un script qui utilise lâ€™API de
[DeepL](https://www.deepl.com/translator) pour traduire chaque fable. Ã€ ce
stade que jâ€™ai abandonnÃ© ma feuille de calcul pour basculer sur
[Airtable](https://airtable.com/) afin de simplifier lâ€™accÃ¨s aux informations
dans les scripts.  

Cette Ã©tape gÃ©nÃ¨re la colonne â€œTraductionâ€ Ã  partir de la colonne â€œTexteâ€.

[![](https://substack-post-
media.s3.amazonaws.com/public/images/8da25672-9552-44b1-aefc-
df9d03f5355f_3024x920.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8da25672-9552-44b1-aefc-
df9d03f5355f_3024x920.png)AperÃ§u de la table Airtable oÃ¹ les donnÃ©es relatives
Ã  chaques fables sont stockÃ©es

 _AmÃ©lioration possible : mesurer la qualitÃ© des descriptions visuelles
gÃ©nÃ©rÃ©es par ChatGPT avec ou sans prompt._

### DÃ©crire une scÃ¨ne avec ChatGPT

LÃ , on arrive sur les parties Ã©pineuses.

Jâ€™ai testÃ© des dizaines de prompts pour demander Ã  ChatGPT de dÃ©crire une
fable en une image. Celui que jâ€™ai retenu est le suivant.

> You are an experienced illustrator. The goal is to create a prompt for a
> text to image generator. I will give you a tale. I want to depict the most
> representative scene of the tale. Answer using short sentences. Use less
> than 30 words. Focus on the subjects, the environment and the major event of
> the tale.  
>  
> {la fable traduite en anglais}

Le prompt peut Ãªtre analysÃ© de la faÃ§on suivante :

  * _You are an experienced illustrator_ : le rÃ´le Ã  jouer

  *  _The goal is to create a prompt for a text to image generator_ : objectif

  * I _want to depict the most representative scene of the tale_ : dans les premiÃ¨res versions, ChatGPT avait tendance Ã  rÃ©sumer lâ€™histoire et dÃ©crire plusieurs scÃ¨nes. Ã‰videmment, cela nâ€™aide pas Midjourney Ã  crÃ©er des images cohÃ©rentes. Ici, je lui demande de se concentrer sur une seule scÃ¨ne.

  * _Answer using short sentences. Use less than 30 words_ : Les prompts ont tendance Ã  Ãªtre longs. Or, lorsque la description est faite de phrases Ã  rallonge, Midjourney part facilement en vrille sur lâ€™interprÃ©tation. Je prÃ©fÃ¨re lui donner peu dâ€™informations mais quâ€™il colle au prompt plutÃ´t que de lui donner trop dâ€™informations et quâ€™il ne tienne compte que de la moitiÃ©.

  * _Focus on the subjects, the environment and the major event of the tale_ : donner Ã  Midjourney des indications sur les principaux Ã©lÃ©ments Ã  reprÃ©senter. Le dÃ©cor, les personnages, lâ€™action.

### Prendre en main Midjourney et calibrer le prompt

Midjourney est un programme qui permet de gÃ©nÃ©rer des images Ã  partir de
descriptions textuelles. Il se distingue des autres logiciels du mÃªme genre
tels que StableDiffusion et Dall-E par sa tendance naturelle Ã  gÃ©nÃ©rer des
images esthÃ©tiques, ce qui est bien adaptÃ© Ã  la crÃ©ation dâ€™un livre illustrÃ©.

En plus de la description visuelle, il est possible dâ€™utiliser des paramÃ¨tres
pour guider la gÃ©nÃ©ration.

Afin de me familiariser avec Midjourney, jâ€™ai sÃ©lectionnÃ© trois fables (le
chÃªne et le roseau, le rat des villes et le rat des champs, la cigale et la
fourmi) et ai testÃ© diffÃ©rentes variations de :

  * Style : _â€œcyanotypeâ€, â€œcontemporary illustration, bold colors, dynamic compositionâ€, â€œ[minimalist neo pop style](https://cdn.discordapp.com/attachments/1089155086925705336/1089806385262370906/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_142c4379-0766-48a0-93ec-91ef17e42df2.png)â€, â€œ[moebius](https://cdn.discordapp.com/attachments/1089155086925705336/1089639875566903416/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_9b23be8c-601e-4fcb-8d2c-3c0691a05d04.png)â€, â€œ[naive art](https://cdn.discordapp.com/attachments/1089155086925705336/1089641314909442058/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_a690ec99-5875-4115-bdaa-13e2154a200d.png)â€, â€œ[op art](https://cdn.discordapp.com/attachments/1089155086925705336/1089797825522585630/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_95e8dee5-f391-4c4d-b13c-731be9218506.png)â€, â€œ[zentangle](https://cdn.discordapp.com/attachments/1089155086925705336/1089799181973078046/lx_An_oak_tree_and_reed_stand_on_a_windy_riverbank_tension_buil_328d7f57-69a1-49b4-bd9c-c6f57215819b.png)â€, â€œiridescentâ€, â€œcolorful geometricâ€, â€œAirbrush surrealismâ€, â€œContrast of resilience, watercolor style with expressive brushstrokesâ€, â€œY2K grunge grimy textures, chrome metallics, broken grids and amorphous shapesâ€, â€œVintage computer graphicsâ€â€¦_

  * Description

  * chaos : 0, 1000

  * stylize : 0, 100, 1000

  * graine alÃ©atoire (seed)

[![](https://substack-post-
media.s3.amazonaws.com/public/images/350b74bc-e969-4e2d-9d12-682e836533dd_4096x4096.jpeg)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2F350b74bc-e969-4e2d-9d12-682e836533dd_4096x4096.jpeg)Test
de diffÃ©rents styles graphiques dans Midjourney

Rapidement, plusieurs problÃ¨mes/limitations sont apparues :

  * Explorer au hasard et Ã  la main un problÃ¨me Ã  cinq dimensions nâ€™est pas efficace. MÃªme aprÃ¨s y avoir passÃ© plusieurs heures, il reste difficile de tirer des conclusions sur â€œest-ce que je vais dans la bonne direction avec ce jeu de paramÃ¨tresâ€

  * Lorsque le prompt dÃ©crit plusieurs animaux, le moteur tends Ã  mÃ©langer les deux. Par exemple, le prompt _[â€œa dog and a rabbit in a landscape playing hapiness colorfullâ€](https://cdn.discordapp.com/attachments/1089155086925705336/1090970693698592879/lx_a_dog_and_a_rabbit_in_a_landscape_playing_hapiness_colorfull_0606586f-1bb7-46be-8d26-5e9a03b54b5d.png) _gÃ©nÃ¨re un lapin avec une langue de chien, et un chien avec des oreilles de lapinâ€¦ 

  * Midjourney a du mal Ã  reprÃ©senter certains animaux. Lorsque lâ€™on demande une pie, lâ€™animal quâ€™il dessine prÃ©sente parfois davantage les traits dâ€™un corbeau. Lorsque lâ€™on demande une belette, il esquisse une sourisâ€¦

  * Le moteur tends Ã  prendre ses libertÃ© par rapport aux instructions. Il va globalement coller au prompt, mais nâ€™intÃ¨gre pas toujours tous les Ã©lÃ©ments. 

  * Le images gÃ©nÃ©rÃ©es tendent Ã  prÃ©senter de nombreuses inconsistences : un troisiÃ¨me bras, une jambe en moins, â€¦

 _AmÃ©lioration possible :_

  * _commencer par 1) explorer de faÃ§on libre et sur un temps dÃ©limitÃ© pour explorer les limites et les paramÃ¨tres importants puis 2) explorer de faÃ§on mÃ©thodique_

  *  _cette Ã©tape nâ€™est pas nÃ©cessaire Ã  la mise en place du walking skeleton : pour commencer, il serait tout Ã  fait possible de gÃ©nÃ©rer des images sans prÃ©ciser le style et avec les paramÃ¨tres par dÃ©faut puis de revenir plus tard Ã  cette Ã©tape pour lâ€™amÃ©liorer_

  *  _jouer avec le paramÃ¨tre â€œqualityâ€ (qui nâ€™influe pas sur la qualitÃ© de lâ€™image comme je lâ€™ai dâ€™abord interprÃªtÃ© mais sur la â€œqualitÃ© du dessinâ€)._

### Automatiser la gÃ©nÃ©ration des images

Lâ€™un des objectifs de ce projet est dâ€™automatiser au maximum chaque Ã©tape.
GÃ©nÃ©rer de longues sÃ©ries dâ€™images avec Midjourney est particuliÃ¨rement
fastidieux puisque pour chaque image, cela consiste Ã  :

  1. Entrer le prompt

  2. GÃ©nÃ©rer une grille de quatre propositions (~ 1min)

  3. Agrandir une image (10s) ou relancer une grille de propositions (retour Ã  lâ€™Ã©tape 2)

  4. Enregistrer lâ€™image

Lâ€™automatisation de cette Ã©tape prÃ©sente ainsi deux intÃ©rÃªts :

  * Mettre Ã  jour lâ€™Ã©dition avec une nouvelle version de Midjourney devient simple. Il suffit de relancer le script de gÃ©nÃ©ration pour chaque fable.

  * Explorer de faÃ§on mÃ©thodique un grand nombre de styles, de paramÃ¨tres et de descriptions

Malheureusement, il nâ€™existe pas dâ€™API officielle de Midjourney, et
lâ€™automatisation va Ã  lâ€™encontre de leurs [conditions
dâ€™utilisation](https://docs.midjourney.com/docs/terms-of-service). Cependant,
il existe tout de mÃªme plusieurs faÃ§ons dâ€™automatiser le processus.

  * Utiliser une api non officielles : [cet article](https://www.theinsaneapp.com/2023/05/midjourney-api.html) en rÃ©fÃ©rence plusieurs 

  * CrÃ©er son propre bot Discord pour servir de proxy : il est ainsi possible dâ€™interagir avec via son bot, qui lui interagit alors avec le bot de Midjourney. 

  * Automatiser la souris et le clavier avec des outils comme [PyAutoGUI](https://pyautogui.readthedocs.io/en/latest/#) ou son navigateur avec des outils comme [Puppeteer](https://pptr.dev/), [Selenium](https://www.selenium.dev/) ou [Playwright](https://playwright.dev/python/).

#### Option 1 : Utiliser une api non officielles

Les API non officielles sont payantes. Or, jâ€™ai dÃ©jÃ  un abonnement Ã 
Midjourney et ne veux pas payer en double. Aussi, Ã©tant dans une dÃ©marche de
construction, jâ€™ai rapidement Ã©cartÃ© ces options et ne les ai pas creusÃ©es
davantage.

#### Option 2 : CrÃ©er mon propre Bot Discord

Câ€™est lâ€™option qui mâ€™a dâ€™abord parue la plus sÃ©duisante.

Jâ€™ai donc explorÃ© cette piste et ai Ã©tÃ© agrÃ©ablement surpris de voir Ã  quel
point il est simple de crÃ©er un bot Discord. La bibliothÃ¨que python
[discord.py](https://github.com/Rapptz/discord.py) est simple Ã  prendre en
main et il est rapide de coder ses premiÃ¨res interactions.

Par contre, je nâ€™ai pas rÃ©ussi Ã  faire communiquer mon bot avec le bot de
Midjourney (pour Ãªtre prÃ©cis, je nâ€™ai pas trouvÃ© comment faire pour envoyer
une â€œslash commandâ€ au bot de midjourney Ã  partir de mon bot). Jâ€™ai bloquÃ©
toute une aprÃ¨s-midi sur la question.

En allant chercher de lâ€™aide sur le serveur Discord de discord.py, jâ€™ai vu que
dâ€™autres personnes rencontraient le mÃªme problÃ¨me que moi. La rÃ©ponse Ã©tait
toujours lÃ  mÃªme : [â€œles bots ne peuvent pas invoquer de slash
commandsâ€](https://discord.com/channels/336642139381301249/985299059441025044/threads/1075203228255395923).

Essayons autre chose.

#### Option 3 : Lâ€™automatisation navigateur

Les automatisations navigateur sont rÃ©pandues dans le monde du dÃ©veloppement
logiciel oÃ¹ elles servent Ã  vÃ©rifier le bon fonctionnement de lâ€™application du
point de vue de lâ€™utilisateur.

##### Choisir une bibliothÃ¨que

En python, les deux principaux outils pour automatiser les interactions avec
un navigateur sont [Selenium](https://pypi.org/project/selenium/) et
[Playwright](https://playwright.dev/python/).

  * Selenium existe depuis 2004, est open-source et bÃ©nÃ©ficie dâ€™une large communautÃ© dâ€™utilisateurs. Câ€™est un standard de lâ€™industrie, Ã  tel point que son interface WebDriver a Ã©tÃ© ajoutÃ© au recommandations de lâ€™organisme de standardisation W3C en 2018 ([ref](https://www.w3.org/TR/webdriver1/)).

  * Playwright lui est tout jeune. Il a Ã©tÃ© publiÃ© en 2020 par Microsoft et met en avant le fait dâ€™Ãªtre conÃ§u pour le web moderne. Il supporte moins de navigateurs que Selenium, mais est plus performant.

Dans notre contexte, les deux outils sont parfaitement adaptÃ©. Jâ€™ai donc suivi
mon envie et suis parti sur lâ€™option Playwright.

##### Coder lâ€™automation

Pour rÃ©pondre aux besoins du projet, jâ€™ai mis en place deux automations. La
premiÃ¨re gÃ©nÃ¨re une planche de suggestion pour chaque fable. La deuxiÃ¨me,
dÃ©crite plus bas, agrandit les images sÃ©lectionnÃ©es via la mÃ©thode â€œupscaleâ€
fournie par Midjourney.

Les automatisations de navigateur procÃ¨dent de la faÃ§on suivant :

  1. Cibler un Ã©lÃ©ment de la page

  2. Interagir avec lâ€™Ã©lÃ©ment ciblÃ©

Pour accÃ©lÃ©rer cette partie, jâ€™ai me suis directement inspirÃ© de [ce
script](https://github.com/passivebot/midjourney-automation-
bot/blob/main/upscale_midjourney_downloader.py) en rÃ©cupÃ©rant les fonctions
dont jâ€™avais besoin, au moment oÃ¹ jâ€™en avais besoin.

### Le pipeline de sÃ©lection

Les outils d'IA facilitent le processus de divergence et la gÃ©nÃ©ration
d'options. Cependant, une fois les propositions gÃ©nÃ©rÃ©es, il reste encore Ã 
choisir celle que lâ€™on veut utiliser, lâ€™agrandir, la passer en 300 dpi (en vue
de lâ€™impression), puis Ã  la placer dans le dossier assets du livre afin que
lâ€™image soit chargÃ©e dans le projet.

Ce processus peut rapidement devenir chronophage et dÃ©sordonnÃ©. Afin de
l'automatiser et de le fluidifier, j'ai mis en place le pipeline suivant. A
chaque fois, un script permet de passer d'une Ã©tape Ã  la suivante et toutes
les donnÃ©es intermÃ©diaires sont mÃ©morisÃ©es.

[![](https://substack-post-
media.s3.amazonaws.com/public/images/d2905cd3-aaf3-45b6-ba26-23108eba22b2_1571x741.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd2905cd3-aaf3-45b6-ba26-23108eba22b2_1571x741.png)

Prennons lâ€™exemple de la fable â€œLe Renard et les Raisinsâ€.

  1. La planche de suggestion du job `1b197be7` est enregistrÃ©e dans le dossier `1_Grille/Le Renard et les Raisins/1b197be7.png`

  2. Un script python parcours de faÃ§on rÃ©cursive les dossiers qui sont dans `1_Grille`, dÃ©coupe lâ€™image en quatre puis enregistre chaque morceau dans le dossier `2_Splits` en conservant le dossier intermÃ©diaire qui indique le nom de la fable et en ajoutant le suffixe `U1`, `U2`, `U3` ou `U4` au nom de lâ€™image pour indiquer sa position dans la grille initiale. 

  3. Dans le finder, jâ€™utilise la preview avec la touche espace pour comparer les images puis renomme ma favorite en la prÃ©fixant par une Ã©toile.

  4. Un script python rÃ©cupÃ¨re toutes les images qui sont prÃ©fixÃ©es, les agrandit en entrant dans Discord la commande Midjourney `/show 1b197be7` puis en cliquant sur le bouton upscale correspondant au morceau. Par exemple, `U1`.

  5. Un script python rÃ©cupÃ¨re les images qui ont Ã©tÃ© agrandies, les passe en 300 dpi, puis les copie dans le dossier ressources du livre.

_AmÃ©lioration possible :_

  * _upscaler et passer en 300 dpi de faÃ§on systÃ©matique permettrait de rÃ©duire le nombre dâ€™Ã©tapes et de simplifier le processus. Passer une image en 300 dpi est quasiment instantanÃ© et le coÃ»t de lâ€™upscale est nÃ©gligeable en phase dâ€™exploration._

## Mettre en page le livre

#### Choisir un outil de mise en page

Toujours en ayant en tÃªte de produire une solution la plus automatisÃ©e et
â€œmise-Ã -jour-ableâ€ possible, jâ€™ai dâ€™abord essayer de trouver un outil qui
permette de â€œgÃ©nÃ©rerâ€ un livre Ã  partir de code.

Je nâ€™ai pas trouvÃ© de tels outils Ã  proprement parler.

Les outils _Markdown to PDF_ se rapprochent de cette idÃ©e, mais derriÃ¨re, les
options de mise en page sont assez limitÃ©es ou â€œhackyâ€.

[LaTeX](https://www.latex-project.org/) que jâ€™ai utilisÃ© pendant mes Ã©tudes
rÃ©ponds bien Ã  cette envie dâ€™automatisation. Avec LaTeX, le contenu est sÃ©parÃ©
de la mise en page. Il est donc possible de gÃ©rer chaque chose sÃ©parÃ©mment.
Seulement, produire un joli style nâ€™est pas aisÃ©. Lâ€™outil sâ€™adresse davantage
aux chercheurs et aux scientifiques quâ€™aux designers et aux auteurs de livres
pour enfants.

Il vient ensuite les deux principales solutions du marchÃ© :
[InDesign](https://www.adobe.com/fr/products/indesign.html) et
[Canva](https://www.canva.com/) :

  * InDesign est un logiciel de mise en page dÃ©velopÃ© par Adobe et publiÃ© pour la premiÃ¨re fois en 1999. Câ€™est un standard de lâ€™industrie de la mise en page, mais aussi un produit qui est complexe Ã  aborder de prime abord. Son prix est assez Ã©levÃ©. De faÃ§on plus personnelle, câ€™est un produit que jâ€™affectionne. Cela fait longtemps que je ne lâ€™ai pas utilisÃ©, mais jâ€™ai beaucoup utilisÃ© par le passÃ© (comme pour ce portfolio rÃ©alisÃ© en 2015).

  * Canva est un logiciel de conception graphique dont la premiÃ¨re version a Ã©tÃ© publiÃ©e en 2008. Cet outil est nÃ© en rÃ©action Ã  InDesign avec la volontÃ© de proposer un outil sans installation et simple dâ€™utilisation. Sa popularitÃ© a explosÃ©e en 2019 et câ€™est une solution particuliÃ¨rement adaptÃ© Ã  la crÃ©ation de supports visuels en ligne.

Les deux outils me paraissent adaptÃ© au problÃ¨me, mais je pense quâ€™InDesign
offre dâ€™avantage dâ€™options dâ€™automatisation. Jâ€™espÃ¨re quâ€™apprendre Ã 
lâ€™utiliser va vite revenir et Lulu propose justement des templates InDesign
pour rÃ©aliser la maquette du livre. Alors go pour InDesign.

#### Executer la mise en page

Pour mettre en page le livre, jâ€™ai procÃ©dÃ© de la faÃ§on suivante :

  1. RÃ©cupÃ©rer le [template InDesign](https://www.lulu.com/publishing-toolkit) proposÃ© par Lulu

  2. Mettre en page une fable reprÃ©sentative. En analysant les textes sÃ©lectionnÃ©, on note que les fables font en moyenne un peu plus de 31 lignes et que cela correspond aussi Ã  la valeur mÃ©diane : la moitiÃ© des fables sÃ©lectionnÃ©es font 31 lignes ou moins. IdÃ©alement, jâ€™aurais aimÃ© que pour chaque fable, le texte et lâ€™image tienne dans une double page, ce qui aurait grandement facilitÃ© la mise en page. 

  3. ConsidÃ©rer mettre de cÃ´tÃ© tous les textes qui ne tiennent pas sur une page. Cela peut faire une Ã©dition agrÃ©able Ã  lire. Mais cela implique de mettre de cÃ´tÃ© certaines de mes fables intÃ©ressantes comme Le Meunier, son Fils et l'Ã‚ne (83 lignes). Si je veux faire un recueil des â€œmeilleures fablesâ€, ce nâ€™est pas une option.

  4. ConsidÃ©rer de mettre les textes sur plusieurs colonnes. Mais Ã©tant parti sur du A5, introduire deux colonnes nÃ©cessite de descendre la taille de police Ã  6 pour que les vers tiennent sur une ligne. Câ€™est trop petit.

  5. Aller Ã  la Fnac pour voir et toucher la mise en page dâ€™autres livres. 

  6. Revenir sur InDesign

  7. ~~Tester diffÃ©rentes polices~~ (pas nÃ©cessaire pour le walking skeleton)

  8. Extraire le gabarit 

  9. Dupliquer la double page, dupliquer, dupliquer â€¦ x60

  10. Coller les titres 

  11. Coller les textes

  12. Importer les images

  13. GÃ©rer les exceptions : le titres qui ne tiennent pas sur une ligne (coucou La Grenouille qui veut se faire aussi grosse que le BÅ“uf), les textes qui courent sur deux voir trois pages. 

  14. Ajuster les polices, les marges, la position de la numÃ©rotation, â€¦ les petits dÃ©tails

  15. GÃ©nÃ©rer la couverture directement sur Lulu

  16. OK, on est bon pour une premiÃ¨re version !

[![](https://substack-post-
media.s3.amazonaws.com/public/images/7d954b90-e7bc-4d84-9875-191e6180fbaa_3024x1902.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2F7d954b90-e7bc-4d84-9875-191e6180fbaa_3024x1902.png)Le
maquettage dans InDesign

## Finaliser la publication

Une fois la mise en page terminÃ©e, il ne reste plus quâ€™Ã  finaliser la
publication !

Les instructions fournies par la plateforme sont claires et je nâ€™ai pas
rencontrÃ© de problÃ¨mes particuliers Ã  cet Ã©tape.

Au niveau de la fixation des prix, il tout de mÃªme intÃ©ressant de noter que
dans le cas dâ€™une distribution globale (Amazon etc), la marge sur chaque vente
est extrÃªmement faible. Ici, pour un livre vendu 19â‚¬90 sur Amazon, je touche
1â‚¬06. Dans le cas dâ€™une vente directe ou via le shop de Lulu, la marge est par
contre importante, autour de 9â‚¬ par vente.

[![](https://substack-post-
media.s3.amazonaws.com/public/images/cd2d2422-5806-460c-83fb-0c77d445a930_2842x1672.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-
media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcd2d2422-5806-460c-83fb-0c77d445a930_2842x1672.png)La
fixation du prix sur Lulu

## Diffuser le livre

Pour la diffusion, jâ€™ai prÃ©vu les actions suivantes :

  1. Laisser trainer un exemplaire dans lâ€™espace salon du Moho

  2. PrÃ©parer 10 posts pour LinkedIn

  3. En parler dans cet article de newsletter

## Conclusion

Le rÃ©sultat nâ€™est pas Ã  la hauteur de mes espÃ©rance et jâ€™y ai consacrÃ© deux
fois plus de temps quâ€™initiallement prÃ©vu, mais je suis allÃ© au bout !

Jâ€™ai beaucoup aimÃ© travailler en mode hack et essayer d'utiliser la solution
la plus simple et la plus directe pour rÃ©pondre aux besoins.

Techniquement, ce projet aura Ã©tÃ© lâ€™occasion de balayer pas mal de
technologies. Replonger dans python, tester Airtable, utiliser lâ€™api DeepL,
prototyper un bot Discord, dÃ©couvrir Playwright, remettre les mains dans
InDesign.

### Aller plus loin

Pour aller plus loin, il est possible dâ€™amÃ©liorer lâ€™Ã©dition de la faÃ§on
suivante :

  * indiquer les morales de chaque fable sous la forme de conseils activables, en une ligne. Les placer en sous titre ou dans un index placÃ© en dÃ©but ou en fin dâ€™ouvrage. _Exemple pour Le Cochon, la ChÃ¨vre et le Mouton : Ne te torture pas l'esprit avec des problÃ¨mes qui Ã©chappent Ã  ton influence._

  * ajouter des questions Ã  mÃ©diter. _Exemple pour Le Renard et les Raisins : Dans quelles situations de votre vie avez-vous dÃ©jÃ  rationalisÃ© ou minimisÃ© l'importance de quelque chose que vous dÃ©siriez, simplement parce que vous ne pouviez pas l'obtenir ou l'atteindre facilement ?_

  * mettre Ã  jour l'Ã©dition dans un autre style ou avec une prochaine version de Midjourney 

Dâ€™autre part, un autre dâ€™angle Ã  explorer est de rÃ©utiliser le processus mis
en place pour crÃ©er dâ€™autres ouvrages :

  * 50 expressions populaires imagÃ©es : ceintures et bretelles, raconter des salades, â€¦

  * un recueil de contes illustrÃ©s

  * un autre recueil de fables

  * un livre de concepts illustrÃ©s (10x, founder market fit, ...)

  * une version contemporaine des â€œCaractÃ¨resâ€ 

  * une version illustrÃ©e et expliquÃ©e des â€œ27 Ã©motionsâ€ 

[![](https://substack-post-
media.s3.amazonaws.com/public/images/4ab8f67f-51cd-4cff-
bd0c-151fb0c0f007_1024x1024.png)](https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-
post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4ab8f67f-51cd-4cff-
bd0c-151fb0c0f007_1024x1024.png)Illustration de lâ€™expression â€œceintures et
bretellesâ€. On est jamais trop prudent !

### DifficultÃ©s rencontrÃ©es

  * **Rester concentrÃ© sur la mise en place du processus de bout en bout avant de chercher Ã  amÃ©liorer les diffÃ©rentes Ã©tapes**. Câ€™est dingue comme cette tentation est forte de rester des heures Ã  amÃ©liorer une Ã©tape. Par exemple dans la recherche de style, jâ€™ai eu beaucoup de mal Ã  me dire â€œok partons avec Ã§a et je peaufinerais plus tardâ€. Si je nâ€™avais pas dÃ¨s le dÃ©part eu la ferme intention dâ€™Ã©viter ce type de â€œpiÃ¨geâ€, câ€™est vraiment quelque chose qui aurait pu empÃªcher le projet de se matÃ©rialiser. Au final, la qualitÃ© nâ€™est pas au niveau que jâ€™espÃ©rait, mais le projet est. Et si je veux y consacrer davantage de temps, il mâ€™est posssible de lâ€™amÃ©liorer.

  * **DÃ©finir le public visÃ©**. Jâ€™ai beaucoup hÃ©sitÃ© entre adresser lâ€™Ã©ditions aux enfants, ou Ã  de jeunes adultes, ou Ã  des fans de mangas, ou, ou, ou. Au final, jâ€™ai pris lâ€™option de lâ€™adresser Ã  de jeunes adultes. Mais ne pas avoir une idÃ©e claire de â€œÃ  qui sâ€™adresse lâ€™ouvrageâ€ mâ€™a fait perdre beaucoup de temps en questions et interrogations lors de lâ€™Ã©tape de la mise en page et la recherche du style.

  * **Aller au bout de lâ€™itÃ©ration quoi quâ€™il arrive**. En avanÃ§ant dans les expÃ©rimentations, jâ€™ai rapidement compris que les illustrations auraient difficilement lâ€™originalitÃ© et la qualitÃ© que jâ€™espÃ©rait et que la mise en page nâ€™allait pas non plus Ãªtre au niveau ambitionnÃ©. Plusieurs fois je me suis demandÃ© sâ€™il ne vallait pas mieux que je passe directement Ã  un autre projet.

### LeÃ§on

On dit souvent que â€œ _lâ€™idÃ©e de vaut rien_ â€ et que _â€œcâ€™est lâ€™exÃ©cution qui
compteâ€_. Dans ce projet, je me suis rendu compte que, clairement, tant que tu
n'as pas essayÃ© de mettre en Å“uvre lâ€™idÃ©e, tu nâ€™as pas idÃ©e du nombre de
problÃ¨mes et dâ€™obstacles que tu vas rencontrer. Aussi, le nombre de dÃ©cisions
Ã  prendre, et donc de chemins qui partent de lâ€™idÃ©e pour arriver Ã  une
concrÃ©tisation, sont tellements nombreux, que lâ€™on peut affirmer que tout se
passe dans lâ€™exÃ©cution.

Merci de mâ€™avoir lu jusquâ€™ici !

Si vous avez aimÃ© cette Ã©dition, nâ€™hÃ©sitez pas Ã  vous abonner ou Ã  la partager
autour de vous.

[Subscribe now](https://100produits.substack.com/subscribe?)

Ã€ trÃ¨s vite pour un nouveau projet !

Alexandre

